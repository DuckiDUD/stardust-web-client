"use strict";(self.webpackChunkstardust=self.webpackChunkstardust||[]).push([[912],{912:(t,e,a)=>{a.r(e),a.d(e,{GoogleCastLoader:()=>l});var r=a(664),o=a(788),n=a(752),s=a(324),i=a(720),c=a(112);class l{constructor(){this.name="google-cast"}get cast(){return(0,i.g)()}mediaType(){return"video"}canPlay(t){return s.I&&!s.a&&(0,o.c)(t)}async prompt(t){let e;try{var a;const r=await this.Pl(t);this.aa||(this.aa=new cast.framework.RemotePlayer,new cast.framework.RemotePlayerController(this.aa)),e=t.player.createEvent("google-cast-prompt-open",{trigger:r}),t.player.dispatchEvent(e),this.pm(t,"connecting",e),await this.Rl((0,c.u)(t.$props.googleCast)),t.$state.remotePlaybackInfo.set({deviceName:null===(a=(0,i.a)())||void 0===a?void 0:a.getCastDevice().friendlyName}),(0,i.i)()&&this.pm(t,"connected",e)}catch(o){const e=(0,r.c)(o);throw this.pm(t,(0,i.i)()?"connected":"disconnected",new c.D("google-cast-prompt-error",{detail:e})),e}finally{t.player.dispatch("google-cast-prompt-close",{trigger:e})}}async load(t){if(!this.aa)throw Error("[vidstack] google cast player was not initialized");return new((await a.e(716).then(a.bind(a,716))).GoogleCastProvider)(this.aa,t)}async Pl(t){if((0,i.h)())return;const e=t.player.createEvent("google-cast-load-start");t.player.dispatch(e),await(0,n.l)((0,i.e)()),await customElements.whenDefined("google-cast-launcher");const a=t.player.createEvent("google-cast-loaded",{trigger:e});if(t.player.dispatch(a),!(0,i.b)())throw Error("Cast not available.");return a}async Rl(t){this.Tl(t);const e=await this.cast.requestSession();if(e)throw Error((0,i.c)(e))}Tl(t){var e;null===(e=this.cast)||void 0===e||e.setOptions({...(0,i.d)(),...t})}pm(t,e,a){const r={type:"google-cast",state:e};t.delegate.c("remote-playback-change",r,a)}}},720:(t,e,a)=>{a.d(e,{a:()=>l,b:()=>s,c:()=>p,d:()=>g,e:()=>o,f:()=>d,g:()=>c,h:()=>n,i:()=>i,j:()=>u,l:()=>h});var r=a(928);function o(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function n(){var t;return!(null===(t=window.cast)||void 0===t||!t.framework)}function s(){var t;return!(null===(t=window.chrome)||void 0===t||null===(t=t.cast)||void 0===t||!t.isAvailable)}function i(){return c().getCastState()===cast.framework.CastState.CONNECTED}function c(){return window.cast.framework.CastContext.getInstance()}function l(){return c().getCurrentSession()}function d(){var t;return null===(t=l())||void 0===t?void 0:t.getSessionObj().media[0]}function u(t){var e;return(null===(e=d())||void 0===e?void 0:e.media.contentId)===(null===t||void 0===t?void 0:t.src)}function g(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function p(t){return"Google Cast Error Code: ".concat(t)}function h(t,e){return(0,r.l)(c(),t,e)}}}]);
//# sourceMappingURL=912.9ff0c1c3.chunk.js.map